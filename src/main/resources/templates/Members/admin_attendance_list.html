<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ê·¼íƒœ ìš”ì²­ ê´€ë¦¬</title>
    <link rel="stylesheet" th:href="@{/css/admin_user_list.css}">
    <style>
        /* íƒ­ ë©”ë‰´ ìŠ¤íƒ€ì¼ ìœ ì§€ */
        .btn-tab { padding: 10px 20px; text-decoration: none; color: #666; border-bottom: 3px solid transparent; }
        .btn-tab.active { color: #3182ce; border-bottom: 3px solid #3182ce; font-weight: bold; }

        /* ê·¼íƒœ ê´€ë¦¬ìš© í…Œì´ë¸” ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        table { width: 100%; border-collapse: collapse; margin-top: 10px; background: white; }
        th, td { border: 1px solid #eee; padding: 12px; text-align: left; }
        th { background-color: #f8f9fa; font-weight: bold; }
        .payload-cell { font-family: monospace; font-size: 0.9em; color: #4a5568; }
    </style>
</head>
<body>

<div class="admin-header" th:if="${admin != null}"
     style="padding: 15px; background: #fff; border-bottom: 1px solid #ddd; margin-bottom: 20px;">
    <span> ê´€ë¦¬ì: <b th:text="${admin.adminName}">ê´€ë¦¬ì</b></span>
    <form th:action="@{/logout}" method="post" style="display:inline; float: right;">
        <button type="submit" class="btn-secondary" style="padding: 5px 12px; cursor: pointer;">ë¡œê·¸ì•„ì›ƒ</button>
    </form>
</div>

<div style="padding: 0 20px;">
    <div style="display: flex; gap: 20px; border-bottom: 1px solid #ddd; margin-bottom: 20px;">
        <a th:href="@{/admin/member/list}" class="btn-tab">ì§ì› ê´€ë¦¬</a>
        <a th:href="@{/admin/attendance/list}" class="btn-tab active">ê·¼íƒœ ìš”ì²­ ê´€ë¦¬</a>
        <a th:href="@{/admin/manage/list}" class="btn-tab">ê´€ë¦¬ì ì„¤ì •</a>
        <a th:href="@{/admin/log/list}" class="btn-tab">í™œë™ ë¡œê·¸</a>
    </div>

    <h2>ğŸ“… ê·¼íƒœ ìˆ˜ì • ìš”ì²­ (ëŒ€ê¸°)</h2>

    <table>
        <thead>
        <tr>
            <th>ìš”ì²­ ID</th>
            <th>ì‚¬ìš©ì ID</th>
            <th>ìš”ì²­ ë‚´ìš©</th>
            <th>ìš”ì²­ì¼</th>
            <th>ì²˜ë¦¬</th>
        </tr>
        </thead>

        <tbody>
        <tr th:each="req : ${requests}">
            <td th:text="${req.requestId}"></td>
            <td th:text="${req.userId}"></td>

            <td class="payload-cell">
                <span class="raw-json" style="display:none;" th:text="${req.requestPayload}"></span>
                <div class="parsed-display"></div>
            </td>

            <td th:text="${#temporals.format(req.requestCreatedAt, 'yyyy-MM-dd HH:mm')}"></td>

            <td>
                <button type="button" class="btn-primary"
                        th:attr="data-id=${req.requestId}"
                        onclick="approve(this)" style="padding: 5px 10px; cursor:pointer;">
                    ìŠ¹ì¸
                </button>

                <button type="button" class="btn-secondary"
                        th:attr="data-id=${req.requestId}"
                        onclick="reject(this)" style="padding: 5px 10px; cursor:pointer; margin-left: 5px;">
                    ë°˜ë ¤
                </button>
            </td>
        </tr>
        <tr th:if="${#lists.isEmpty(requests)}">
            <td colspan="5" style="text-align: center; padding: 30px; color: #999;">ëŒ€ê¸° ì¤‘ì¸ ìš”ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</td>
        </tr>
        </tbody>
    </table>
</div>

<script src="/js/admin-attendance.js"></script>
</body>
</html>